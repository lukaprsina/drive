(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{12:function(r,a,e){},13:function(r,a,e){"use strict";e.r(a);var t=e(0),n=e(1),d=e.n(n),c=e(5),s=e.n(c),o=(e(12),e(2)),f=e(6);function u(r,a){var e=a*Math.PI/180;return{x:r*Math.cos(e),y:r*Math.sin(e)}}function i(r,a){return{x:r.x+a.x,y:r.y+a.y}}function l(){var r={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}}},a=[{numberOfForward:3,numberOfBackward:2,angle:0,forward:[],backward:[]},{numberOfForward:1,numberOfBackward:4,angle:110,forward:[],backward:[]},{numberOfForward:8,numberOfBackward:2,angle:180,forward:[],backward:[]},{numberOfForward:1,numberOfBackward:1,angle:270,forward:[],backward:[]}],e=Object(n.useRef)(),d=Object(n.useState)({}),c=Object(f.a)(d,2),s=c[0],l=c[1];function w(){var r=function(r,a){if(!r.current)return null;var e=r.current.getBoundingClientRect(),t=(e.right-e.left)/2,n=(e.bottom-e.top)/2,d=Math.max.apply(Math,a.map((function(r){return r.numberOfForward+r.numberOfBackward}))),c=Math.min(t,n);return{x:t,y:n,roadLength:c/2,roadWidth:c/(3*d),maxRoadWidth:d}}(e,a);l(r)}return Object(n.useEffect)((function(){w()}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}})),function(r,a,e){if(!r)return null;var t,n=Object(o.a)(r);try{for(n.s();!(t=n.n()).done;){var d=t.value;b(d,a,"forward","debug",e),b(d,a,"backward","debug",e),b(d,a,"forward","asphalt",e),b(d,a,"backward","asphalt",e),b(d,a,"center","center",e)}}catch(c){n.e(c)}finally{n.f()}}(function(r,a){if(!a.roadLength&&!a.roadWidth)return null;var e,t=Object(o.a)(r);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,d=(n.numberOfForward+n.numberOfBackward-1)*a.roadWidth/2,c=0;c<n.numberOfForward+n.numberOfBackward;c++){var s=i(u(d-c*a.roadWidth,n.angle-90),u(a.maxRoadWidth*a.roadWidth,n.angle)),f=u(a.roadLength,n.angle);c>=n.numberOfBackward?n.forward.push({first:s,last:f}):n.backward.push({first:s,last:f})}}catch(l){t.e(l)}finally{t.f()}return r}(a,s),r,s),Object(t.jsxs)("svg",{id:"artboard",ref:e,children:[r.asphalt.elements.forward,r.asphalt.elements.backward,r.debug.elements.forward,r.debug.elements.backward]})}function b(r,a,e,n,d){switch(n){case"asphalt":var c,s=Object(o.a)(r[e]);try{for(s.s();!(c=s.n()).done;){var f=c.value,i="",l=[u(d.roadWidth/2,r.angle-90),u(d.roadWidth,r.angle+90),(y=f.last,x=-1,{x:y.x*x,y:y.y*x})];i+="M "+d.x+" "+d.y+" ",i+="m "+f.first.x+" "+f.first.y+" ",i+="l "+l[0].x+" "+l[0].y+" ",i+="l "+f.last.x+" "+f.last.y+" ",i+="l "+l[1].x+" "+l[1].y+" ",i+="l "+l[2].x+" "+l[2].y+" ",i+="Z",a[n].strings[e].push(i)}}catch(g){s.e(g)}finally{s.f()}a[n].elements[e]=a[n].strings[e].map((function(r,a){return Object(t.jsx)("path",{d:r,className:e+"-"+n},a)}));break;case"debug":var b,w=Object(o.a)(r[e]);try{for(w.s();!(b=w.n()).done;){var h=b.value,m={x1:d.x+h.first.x,y1:d.y+h.first.y,x2:d.x+h.first.x+h.last.x,y2:d.y+h.first.y+h.last.y};a[n].strings[e].push(m)}}catch(g){w.e(g)}finally{w.f()}a[n].elements[e]=a[n].strings[e].map((function(r,a){return Object(t.jsx)("line",{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,className:e+"-"+n},a)}));break;case"center":break;default:console.error("Wrong road layer")}var y,x}function w(){return Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(l,{})})}s.a.render(Object(t.jsx)(d.a.StrictMode,{children:Object(t.jsx)(w,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.e2929784.chunk.js.map