(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{14:function(t,e,r){},15:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(1),o=r.n(a),s=r(7),c=r.n(s),l=(r(14),r(3)),i=r(2),d=r(8),f=r(4);function u(t){if(!t||!t.length)return null;var e,r="",n=Object(f.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(r+=a.letter+" ",a.coords){var o,s=Object(f.a)(a.coords);try{for(s.s();!(o=s.n()).done;){var c=o.value;r+=c.x+" "+c.y+" "}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}return r}function h(t){var e=Object(a.useRef)(),r=Object(a.useState)({}),o=Object(i.a)(r,2),s=o[0],c=o[1],h=Object(a.useState)([{numberOfBackward:1,numberOfForward:2,angle:0},{numberOfBackward:1,numberOfForward:1,angle:110},{numberOfBackward:2,numberOfForward:3,angle:170},{numberOfBackward:1,numberOfForward:1,angle:300}]),b=Object(i.a)(h,2),p=b[0],w=b[1],O=Object(d.a)({onDrag:function(t){var e=t.event,r=Object(i.a)(t.args,1)[0];if(console.log("dragging!"),e.x&&e.y){var n=g(e,function(t,e){var r=t.x*e,n=t.y*e;return{x:r,y:n}}(s,-1)),a=Math.atan2(n.y,n.x)*(180/Math.PI),o=p.map((function(t){return Object(l.a)({},t)}));o[r].angle=a,w(o)}}});Object(a.useEffect)((function(){function t(){var t=function(t,e){if(!t.current)return null;var r=t.current.getBoundingClientRect(),n=(r.right-r.left)/2,a=(r.bottom-r.top)/2,o=Math.max.apply(Math,e.map((function(t){return t.numberOfForward+t.numberOfBackward}))),s=Math.min(n,a);return{x:n,y:a,roadLength:s/2,roadWidth:s/o*.4,maxRoadWidth:o}}(e,p);c(t)}return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e,p]);var j=function(t,e,r){if(!t||!e)return null;for(var a={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},line:{elements:{striped:[],continous:[]},strings:{striped:[],continous:[]}},center:{},curb:{},rotate:{elements:[],strings:[]}},o={offsetBottom:function(t){return g(e,t.first)},offsetTop:function(t){return g(e,t.last)},halfRoadLeft:function(t){return m(e.roadWidth/2,t.angle-90)},halfRoadRight:function(t){return m(e.roadWidth/2,t.angle+90)},laneBottomLeft:function(t,e){return g(o.halfRoadLeft(e),o.offsetBottom(t))},laneTopLeft:function(t,e){return g(o.halfRoadLeft(e),o.offsetTop(t))},laneBottomRight:function(t,e){return g(o.halfRoadRight(e),o.offsetBottom(t))},laneTopRight:function(t,e){return g(o.halfRoadRight(e),o.offsetTop(t))},roadBottomLeft:function(t){return g(g(t.backward[0].first,e),o.halfRoadLeft(t))},roadBottomRight:function(t){return g(g(t.forward[t.forward.length-1].first,e),o.halfRoadRight(t))},roadTopLeft:function(t){return g(g(t.backward[0].last,e),o.halfRoadLeft(t))},roadTopRight:function(t){return g(g(t.forward[t.forward.length-1].last,e),o.halfRoadRight(t))},roadTopMiddle:function(t){return g(m(e.roadLength,t.angle),g(m((t.numberOfForward+t.numberOfBackward)*e.roadWidth/2,t.angle+90),o.roadBottomLeft(t)))}},s=function(){var s,h=d[c],m=Object(f.a)(t.entries());try{for(m.s();!(s=m.n()).done;){var g,b=Object(i.a)(s.value,2),p=b[0],w=b[1],O=Object(f.a)(w[h].entries());try{for(O.s();!(g=O.n()).done;){var j=Object(i.a)(g.value,2),x=j[0],y=j[1];a.asphalt.strings[h].push(u([{letter:"M",coords:[o.offsetBottom(y)]},{letter:"L",coords:[o.laneBottomLeft(y,w),o.laneTopLeft(y,w),o.laneTopRight(y,w),o.laneBottomRight(y,w)]},{letter:"Z"}])),a.debug.strings[h].push([o.offsetBottom(y),o.offsetTop(y)]),x===w[h].length-1&&"backward"!==h||(x===w[h].length-1&&"backward"===h?a.line.strings.continous.push([o.laneBottomRight(y,w),o.laneTopRight(y,w)]):a.line.strings.striped.push([o.laneBottomRight(y,w),o.laneTopRight(y,w)]))}}catch(B){O.e(B)}finally{O.f()}"backward"===h&&(a.rotate.strings.push(o.roadTopMiddle(w)),a.rotate.elements=a.rotate.strings.map((function(t,e){return Object(n.jsx)("circle",Object(l.a)(Object(l.a)({cx:t.x,cy:t.y,r:"10"},r(e)),{},{className:"rotate"}),e)}))),0===p&&(a.center.string=u([{letter:"M",coords:[o.roadBottomLeft(w)]}])),a.center.string+=u([{letter:"L",coords:[o.roadBottomLeft(w),o.roadBottomRight(w)]}]),a.coordInfo=Object(n.jsx)("circle",{cx:e.x,cy:e.y,r:"5"}),0===p&&(a.curb.string=u([{letter:"M",coords:[o.roadBottomLeft(w)]}])),a.curb.string+=u([{letter:"L",coords:[o.roadBottomLeft(w),o.roadTopLeft(w)]},{letter:"M",coords:[o.roadTopRight(w)]},{letter:"L",coords:[o.roadBottomRight(w)]}]),p===t.length-1&&(a.curb.string+=u([{letter:"L",coords:[o.roadBottomLeft(t[0])]}])),a.asphalt.elements[h]=a.asphalt.strings[h].map((function(t,e){return Object(n.jsx)("path",{d:t,className:h+"-asphalt"},e)})),a.debug.elements[h]=a.debug.strings[h].map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:h+"-debug"},e)})),a.line.elements.striped=a.line.strings.striped.map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:h+"-line",strokeDasharray:"30, 60"},e)})),a.line.elements.continous=a.line.strings.continous.map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:h+"-line"},e)}))}}catch(B){m.e(B)}finally{m.f()}},c=0,d=["forward","backward"];c<d.length;c++)s();return a.center.element=Object(n.jsx)("path",{d:a.center.string,className:"center"}),a.curb.element=Object(n.jsx)("path",{d:a.curb.string,className:"curb"}),a}(function(t,e){var r=[];if(!(e&&e.roadLength&&e.roadWidth))return null;for(var n=0;n<t.length;n++){var a=t[n],o=(a.numberOfForward+a.numberOfBackward-1)*e.roadWidth/2;r[n]={forward:[],backward:[],maxDistance:o,angle:a.angle,numberOfForward:a.numberOfForward,numberOfBackward:a.numberOfBackward};for(var s=a.numberOfForward+a.numberOfBackward,c=0;c<s;c++){var l=g(m(o-c*e.roadWidth,a.angle-90),m(e.maxRoadWidth*e.roadWidth*.8,a.angle)),i=g(l,m(e.roadLength,a.angle));c>=a.numberOfForward?r[n].forward.push({first:l,last:i}):r[n].backward.push({first:l,last:i})}}return r}(p,s),s,O);return Object(n.jsxs)("svg",{id:"artboard",ref:e,children:[j?j.asphalt.elements.forward:null,j?j.asphalt.elements.backward:null,j?j.center.element:null,j?j.curb.element:null,j?j.line.elements.continous:null,j?j.line.elements.striped:null,j?j.rotate.elements:null,j?j.coordInfo:null,j?null:Object(n.jsx)("text",{children:"Loading"})]})}function m(t,e){var r=e*Math.PI/180;return{x:t*Math.cos(r),y:t*Math.sin(r)}}function g(t,e){return{x:t.x+e.x,y:t.y+e.y}}function b(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(h,{})})}c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.986076a7.chunk.js.map