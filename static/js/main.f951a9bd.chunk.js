(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{23:function(t,r,e){},28:function(t,r,e){"use strict";e.r(r);var n=e(1),a=e(0),o=e.n(a),f=e(12),l=e.n(f),d=(e(23),e(5)),s=e(40),c=e(6);function i(t){if(!t||!t.length)return null;var r,e="",n=Object(c.a)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(e+=a.letter+" ",a.coords){var o,f=Object(c.a)(a.coords);try{for(f.s();!(o=f.n()).done;){var l=o.value;e+=l.x+" "+l.y+" "}}catch(d){f.e(d)}finally{f.f()}}}}catch(d){n.e(d)}finally{n.f()}return e}function u(t,r){var e=r*Math.PI/180;return{x:t*Math.cos(e),y:t*Math.sin(e)}}function h(t,r){return{x:t.x+r.x,y:t.y+r.y}}function m(t){var r=Object(a.useRef)(),e=t.roadInfo,o=Object(a.useState)({}),f=Object(d.a)(o,2),l=f[0],m=f[1];Object(a.useEffect)((function(){function t(){var t=function(t,r){if(!t.current)return null;var e=t.current.getBoundingClientRect(),n=(e.right-e.left)/2,a=(e.bottom-e.top)/2,o=Math.max.apply(Math,r.map((function(t){return t.numberOfForward+t.numberOfBackward}))),f=Math.min(n,a);return{x:n,y:a,roadLength:f/2,roadWidth:f/o*.5,maxRoadWidth:o}}(r,e);m(t)}return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[r,e]);var g=function(t,r){if(!t||!r)return null;for(var e={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},line:{strings:[]},center:{},curb:{}},a={offsetBottom:function(t){return h(r,t.first)},offsetTop:function(t){return h(r,t.last)},halfRoadLeft:function(t){return u(r.roadWidth/2,t.angle-90)},halfRoadRight:function(t){return u(r.roadWidth/2,t.angle+90)},laneBottomLeft:function(t,r){return h(a.halfRoadLeft(r),a.offsetBottom(t))},laneTopLeft:function(t,r){return h(a.halfRoadLeft(r),a.offsetTop(t))},laneBottomRight:function(t,r){return h(a.halfRoadRight(r),a.offsetBottom(t))},laneTopRight:function(t,r){return h(a.halfRoadRight(r),a.offsetTop(t))},roadBottomLeft:function(t){return h(h(t.backward[0].first,r),a.halfRoadLeft(t))},roadBottomRight:function(t){return h(h(t.forward[t.forward.length-1].first,r),a.halfRoadRight(t))},roadTopLeft:function(t){return h(h(t.backward[0].last,r),a.halfRoadLeft(t))},roadTopRight:function(t){return h(h(t.forward[t.forward.length-1].last,r),a.halfRoadRight(t))}},o=function(){var r,o=l[f],s=Object(c.a)(t.entries());try{for(s.s();!(r=s.n()).done;){var u,h=Object(d.a)(r.value,2),m=h[0],g=h[1],b=Object(c.a)(g[o].entries());try{for(b.s();!(u=b.n()).done;){var w=Object(d.a)(u.value,2),p=w[0],O=w[1];e.asphalt.strings[o].push(i([{letter:"M",coords:[a.offsetBottom(O)]},{letter:"L",coords:[a.laneBottomLeft(O,g),a.laneTopLeft(O,g),a.laneTopRight(O,g),a.laneBottomRight(O,g)]},{letter:"Z"}])),e.debug.strings[o].push([a.offsetBottom(O),a.offsetTop(O)]),p===g[o].length-1&&"backward"!==o||e.line.strings.push([a.laneBottomRight(O,g),a.laneTopRight(O,g)])}}catch(j){b.e(j)}finally{b.f()}0===m&&(e.center.string=i([{letter:"M",coords:[a.roadBottomLeft(g)]}])),e.center.string+=i([{letter:"L",coords:[a.roadBottomLeft(g),a.roadBottomRight(g)]}]),0===m&&(e.curb.string=i([{letter:"M",coords:[a.roadBottomLeft(g)]}])),e.curb.string+=i([{letter:"L",coords:[a.roadBottomLeft(g),a.roadTopLeft(g)]},{letter:"M",coords:[a.roadTopRight(g)]},{letter:"L",coords:[a.roadBottomRight(g)]}]),m===t.length-1&&(e.curb.string+=i([{letter:"L",coords:[a.roadBottomLeft(t[0])]}])),e.asphalt.elements[o]=e.asphalt.strings[o].map((function(t,r){return Object(n.jsx)("path",{d:t,className:o+"-asphalt"},r)})),e.debug.elements[o]=e.debug.strings[o].map((function(t,r){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-debug"},r)})),e.line.elements=e.line.strings.map((function(t,r){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-line","stroke-dasharray":"30, 60"},r)}))}}catch(j){s.e(j)}finally{s.f()}},f=0,l=["forward","backward"];f<l.length;f++)o();return e.center.element=Object(n.jsx)("path",{d:e.center.string,className:"center"}),e.curb.element=Object(n.jsx)("path",{d:e.curb.string,className:"curb"}),e}(function(t,r){var e=[];if(!(r&&r.roadLength&&r.roadWidth))return null;for(var n=0;n<t.length;n++){var a=t[n];e[n]={forward:[],backward:[],angle:a.angle};for(var o=(a.numberOfForward+a.numberOfBackward-1)*r.roadWidth/2,f=a.numberOfForward+a.numberOfBackward,l=0;l<f;l++){var d=h(u(o-l*r.roadWidth,a.angle-90),u(r.maxRoadWidth*r.roadWidth*.8,a.angle)),s=h(d,u(r.roadLength,a.angle));l>=a.numberOfBackward?e[n].forward.push({first:d,last:s}):e[n].backward.push({first:d,last:s})}}return e}(e,l),l);return Object(n.jsxs)("svg",{id:"artboard",ref:r,children:[g?g.asphalt.elements.forward:null,g?g.asphalt.elements.backward:null,g?g.center.element:null,g?g.curb.element:null,g?g.line.elements:null,g?null:Object(n.jsx)(s.a,{children:"Loading"})]})}function g(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(m,{roadInfo:[{numberOfForward:1,numberOfBackward:1,angle:10},{numberOfForward:1,numberOfBackward:1,angle:110},{numberOfForward:2,numberOfBackward:2,angle:180},{numberOfForward:1,numberOfBackward:1,angle:300}]})})}l.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.f951a9bd.chunk.js.map