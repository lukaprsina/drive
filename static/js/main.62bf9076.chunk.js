(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{12:function(t,e,r){},13:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(1),o=r.n(a),s=r(6),i=r.n(s),l=(r(12),r(2)),f=r(3);function c(t){if(!t||!t.length)return null;var e,r="",n=Object(f.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(r+=a.letter+" ",a.coords){var o,s=Object(f.a)(a.coords);try{for(s.s();!(o=s.n()).done;){var i=o.value;r+=i.x+" "+i.y+" "}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}return r}function d(t,e){var r=e*Math.PI/180;return{x:t*Math.cos(r),y:t*Math.sin(r)}}function u(t,e){return{x:t.x+e.x,y:t.y+e.y}}function h(t){var e=Object(a.useRef)(),r=t.roadInfo,o=Object(a.useState)({}),s=Object(l.a)(o,2),i=s[0],h=s[1];Object(a.useEffect)((function(){function t(){var t=function(t,e){if(!t.current)return null;var r=t.current.getBoundingClientRect(),n=(r.right-r.left)/2,a=(r.bottom-r.top)/2,o=Math.max.apply(Math,e.map((function(t){return t.numberOfForward+t.numberOfBackward}))),s=Math.min(n,a);return{x:n,y:a,roadLength:s/2,roadWidth:s/o*.5,maxRoadWidth:o}}(e,r);h(t)}return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e,r]);var m=function(t,e){if(!t||!e)return null;for(var r={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},line:{elements:{striped:[],continous:[]},strings:{striped:[],continous:[]}},center:{},curb:{}},a={offsetBottom:function(t){return u(e,t.first)},offsetTop:function(t){return u(e,t.last)},halfRoadLeft:function(t){return d(e.roadWidth/2,t.angle-90)},halfRoadRight:function(t){return d(e.roadWidth/2,t.angle+90)},laneBottomLeft:function(t,e){return u(a.halfRoadLeft(e),a.offsetBottom(t))},laneTopLeft:function(t,e){return u(a.halfRoadLeft(e),a.offsetTop(t))},laneBottomRight:function(t,e){return u(a.halfRoadRight(e),a.offsetBottom(t))},laneTopRight:function(t,e){return u(a.halfRoadRight(e),a.offsetTop(t))},roadBottomLeft:function(t){return u(u(t.backward[0].first,e),a.halfRoadLeft(t))},roadBottomRight:function(t){return u(u(t.forward[t.forward.length-1].first,e),a.halfRoadRight(t))},roadTopLeft:function(t){return u(u(t.backward[0].last,e),a.halfRoadLeft(t))},roadTopRight:function(t){return u(u(t.forward[t.forward.length-1].last,e),a.halfRoadRight(t))}},o=function(){var e,o=i[s],d=Object(f.a)(t.entries());try{for(d.s();!(e=d.n()).done;){var u,h=Object(l.a)(e.value,2),m=h[0],g=h[1],b=Object(f.a)(g[o].entries());try{for(b.s();!(u=b.n()).done;){var p=Object(l.a)(u.value,2),w=p[0],O=p[1];r.asphalt.strings[o].push(c([{letter:"M",coords:[a.offsetBottom(O)]},{letter:"L",coords:[a.laneBottomLeft(O,g),a.laneTopLeft(O,g),a.laneTopRight(O,g),a.laneBottomRight(O,g)]},{letter:"Z"}])),r.debug.strings[o].push([a.offsetBottom(O),a.offsetTop(O)]),w===g[o].length-1&&"backward"!==o||(w===g[o].length-1&&"backward"===o?r.line.strings.continous.push([a.laneBottomRight(O,g),a.laneTopRight(O,g)]):r.line.strings.striped.push([a.laneBottomRight(O,g),a.laneTopRight(O,g)]))}}catch(j){b.e(j)}finally{b.f()}0===m&&(r.center.string=c([{letter:"M",coords:[a.roadBottomLeft(g)]}])),r.center.string+=c([{letter:"L",coords:[a.roadBottomLeft(g),a.roadBottomRight(g)]}]),0===m&&(r.curb.string=c([{letter:"M",coords:[a.roadBottomLeft(g)]}])),r.curb.string+=c([{letter:"L",coords:[a.roadBottomLeft(g),a.roadTopLeft(g)]},{letter:"M",coords:[a.roadTopRight(g)]},{letter:"L",coords:[a.roadBottomRight(g)]}]),m===t.length-1&&(r.curb.string+=c([{letter:"L",coords:[a.roadBottomLeft(t[0])]}])),r.asphalt.elements[o]=r.asphalt.strings[o].map((function(t,e){return Object(n.jsx)("path",{d:t,className:o+"-asphalt"},e)})),r.debug.elements[o]=r.debug.strings[o].map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-debug"},e)})),r.line.elements.striped=r.line.strings.striped.map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-line",strokeDasharray:"30, 60"},e)})),r.line.elements.continous=r.line.strings.continous.map((function(t,e){return Object(n.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-line"},e)}))}}catch(j){d.e(j)}finally{d.f()}},s=0,i=["forward","backward"];s<i.length;s++)o();return r.center.element=Object(n.jsx)("path",{d:r.center.string,className:"center"}),r.curb.element=Object(n.jsx)("path",{d:r.curb.string,className:"curb"}),r}(function(t,e){var r=[];if(!(e&&e.roadLength&&e.roadWidth))return null;for(var n=0;n<t.length;n++){var a=t[n];r[n]={forward:[],backward:[],angle:a.angle};for(var o=(a.numberOfForward+a.numberOfBackward-1)*e.roadWidth/2,s=a.numberOfForward+a.numberOfBackward,i=0;i<s;i++){var l=u(d(o-i*e.roadWidth,a.angle-90),d(e.maxRoadWidth*e.roadWidth*.8,a.angle)),f=u(l,d(e.roadLength,a.angle));i>=a.numberOfBackward?r[n].forward.push({first:l,last:f}):r[n].backward.push({first:l,last:f})}}return r}(r,i),i);return Object(n.jsxs)("svg",{id:"artboard",ref:e,children:[m?m.asphalt.elements.forward:null,m?m.asphalt.elements.backward:null,m?m.center.element:null,m?m.curb.element:null,m?m.line.elements.continous:null,m?m.line.elements.striped:null,m?null:Object(n.jsx)("text",{children:"Loading"})]})}function m(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(h,{roadInfo:[{numberOfForward:1,numberOfBackward:2,angle:10},{numberOfForward:1,numberOfBackward:1,angle:110},{numberOfForward:2,numberOfBackward:2,angle:180},{numberOfForward:1,numberOfBackward:1,angle:300}]})})}i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(m,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.62bf9076.chunk.js.map