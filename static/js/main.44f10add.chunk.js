(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{23:function(t,r,e){},28:function(t,r,e){"use strict";e.r(r);var a=e(1),n=e(0),o=e.n(n),f=e(12),d=e.n(f),l=(e(23),e(8)),c=e(40),u=e(5);function s(t){if(!t||!t.length)return null;var r,e="",a=Object(u.a)(t);try{for(a.s();!(r=a.n()).done;){var n=r.value;if(e+=n.letter+" ",n.coords){var o,f=Object(u.a)(n.coords);try{for(f.s();!(o=f.n()).done;){var d=o.value;e+=d.x+" "+d.y+" "}}catch(l){f.e(l)}finally{f.f()}}}}catch(l){a.e(l)}finally{a.f()}return e}function i(t,r){var e=r*Math.PI/180;return{x:t*Math.cos(e),y:t*Math.sin(e)}}function h(t,r){return{x:t.x+r.x,y:t.y+r.y}}function b(t){var r=Object(n.useRef)(),e=t.roadInfo,o=Object(n.useState)({}),f=Object(l.a)(o,2),d=f[0],b=f[1];Object(n.useEffect)((function(){function t(){var t=function(t,r){if(!t.current)return null;var e=t.current.getBoundingClientRect(),a=(e.right-e.left)/2,n=(e.bottom-e.top)/2,o=Math.max.apply(Math,r.map((function(t){return t.numberOfForward+t.numberOfBackward}))),f=Math.min(a,n);return{x:a,y:n,roadLength:f/2,roadWidth:f/o*.5,maxRoadWidth:o}}(r,e);b(t)}return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[r,e]);var m=function(t,r){if(!t||!r)return null;for(var e={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},center:{},curb:{}},n={offsetBottom:function(t){return h(r,t.first)},offsetTop:function(t){return h(r,t.last)},halfRoadLeft:function(t){return i(r.roadWidth/2,t.angle-90)},halfRoadRight:function(t){return i(r.roadWidth/2,t.angle+90)},laneBottomLeft:function(t,r){return h(n.halfRoadLeft(r),n.offsetBottom(t))},laneTopLeft:function(t,r){return h(n.halfRoadLeft(r),n.offsetTop(t))},laneBottomRight:function(t,r){return h(n.halfRoadRight(r),n.offsetBottom(t))},laneTopRight:function(t,r){return h(n.halfRoadRight(r),n.offsetTop(t))},roadBottomLeft:function(t){return h(h(t.backward[0].first,r),n.halfRoadLeft(t))},roadBottomRight:function(t){return h(h(t.forward[t.forward.length-1].first,r),n.halfRoadRight(t))},roadTopLeft:function(t){return h(h(t.backward[0].last,r),n.halfRoadLeft(t))},roadTopRight:function(t){return h(h(t.forward[t.forward.length-1].last,r),n.halfRoadRight(t))}},o=function(){var r,o=d[f],c=Object(u.a)(t.entries());try{for(c.s();!(r=c.n()).done;){var i,h=Object(l.a)(r.value,2),b=h[0],m=h[1],g=Object(u.a)(m[o]);try{for(g.s();!(i=g.n()).done;){var w=i.value;e.asphalt.strings[o].push(s([{letter:"M",coords:[n.offsetBottom(w)]},{letter:"L",coords:[n.laneBottomLeft(w,m),n.laneTopLeft(w,m),n.laneTopRight(w,m),n.laneBottomRight(w,m)]},{letter:"Z"}])),e.debug.strings[o].push([n.offsetBottom(w),n.offsetTop(w)])}}catch(p){g.e(p)}finally{g.f()}0===b&&(e.center.string=s([{letter:"M",coords:[n.roadBottomLeft(m)]}])),e.center.string+=s([{letter:"L",coords:[n.roadBottomLeft(m),n.roadBottomRight(m)]}]),0===b&&(e.curb.string=s([{letter:"M",coords:[n.roadBottomLeft(m)]}])),e.curb.string+=s([{letter:"L",coords:[n.roadBottomLeft(m),n.roadTopLeft(m)]},{letter:"M",coords:[n.roadTopRight(m)]},{letter:"L",coords:[n.roadBottomRight(m)]}]),e.asphalt.elements[o]=e.asphalt.strings[o].map((function(t,r){return Object(a.jsx)("path",{d:t,className:o+"-asphalt"},r)})),e.debug.elements[o]=e.debug.strings[o].map((function(t,r){return Object(a.jsx)("line",{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,className:o+"-debug"},r)}))}}catch(p){c.e(p)}finally{c.f()}},f=0,d=["forward","backward"];f<d.length;f++)o();return e.center.element=Object(a.jsx)("path",{d:e.center.string,className:"forward-asphalt"}),e.curb.element=Object(a.jsx)("path",{d:e.curb.string,className:"forward-debug"}),e}(function(t,r){var e=[];if(!(r&&r.roadLength&&r.roadWidth))return null;for(var a=0;a<t.length;a++){var n=t[a];e[a]={forward:[],backward:[],angle:n.angle};for(var o=(n.numberOfForward+n.numberOfBackward-1)*r.roadWidth/2,f=n.numberOfForward+n.numberOfBackward,d=0;d<f;d++){var l=h(i(o-d*r.roadWidth,n.angle-90),i(r.maxRoadWidth*r.roadWidth*.8,n.angle)),c=h(l,i(r.roadLength,n.angle));d>=n.numberOfBackward?e[a].forward.push({first:l,last:c}):e[a].backward.push({first:l,last:c})}}return e}(e,d),d);return Object(a.jsxs)("svg",{id:"artboard",ref:r,children:[m?m.asphalt.elements.forward:null,m?m.asphalt.elements.backward:null,m?m.debug.elements.forward:null,m?m.debug.elements.backward:null,m?m.center.element:null,m?m.curb.element:null,m?null:Object(a.jsx)(c.a,{children:"Loading"})]})}function m(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b,{roadInfo:[{numberOfForward:1,numberOfBackward:1,angle:10},{numberOfForward:1,numberOfBackward:1,angle:110},{numberOfForward:2,numberOfBackward:2,angle:180},{numberOfForward:1,numberOfBackward:1,angle:300}]})})}d.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(m,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.44f10add.chunk.js.map