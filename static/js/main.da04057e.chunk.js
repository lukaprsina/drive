(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{12:function(r,a,e){},13:function(r,a,e){"use strict";e.r(a);var t=e(0),n=e(1),d=e.n(n),c=e(6),s=e.n(c),o=(e(12),e(2)),f=e(5);function u(r,a){var e=a*Math.PI/180,t=r*Math.cos(e),n=r*Math.sin(e);return{x:Math.round(100*t)/100,y:Math.round(100*n)/100}}function i(r,a){var e=r.x+a.x,t=r.y+a.y;return{x:Math.round(100*e)/100,y:Math.round(100*t)/100}}function l(){var r={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}}},a=[{numberOfForward:3,numberOfBackward:2,angle:0,forward:[],backward:[]},{numberOfForward:1,numberOfBackward:4,angle:110,forward:[],backward:[]},{numberOfForward:8,numberOfBackward:2,angle:180,forward:[],backward:[]},{numberOfForward:1,numberOfBackward:1,angle:270,forward:[],backward:[]}],e=Object(n.useRef)(),d=Object(n.useState)({}),c=Object(f.a)(d,2),s=c[0],l=c[1];function w(){var r=function(r,a){if(!r.current)return null;var e=r.current.getBoundingClientRect(),t=(e.right-e.left)/2,n=(e.bottom-e.top)/2,d=Math.max.apply(Math,a.map((function(r){return r.numberOfForward+r.numberOfBackward}))),c=Math.min(t,n);return{x:t,y:n,roadLength:c/2,roadWidth:c/(3*d),maxRoadWidth:d}}(e,a);l(r)}return Object(n.useEffect)((function(){w()}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}})),function(r,a,e){if(!r)return null;var n,d="",c=Object(o.a)(r.entries());try{for(c.s();!(n=c.n()).done;){var s=Object(f.a)(n.value,2),u=s[0],i=s[1];b(i,a,"forward","debug",e),b(i,a,"backward","debug",e),b(i,a,"forward","asphalt",e),b(i,a,"backward","asphalt",e),0===u&&(d+="M "+(i.backward[0].first.x+e.x)+" "+(i.backward[0].first.y+e.y)+" "),d+="L "+(i.backward[0].first.x+e.x)+" "+(i.backward[0].first.y+e.y)+" ";var l=i.forward.length-1;d+="L "+(i.forward[l].first.x+e.x)+" "+(i.forward[l].first.y+e.y)+" "}}catch(w){c.e(w)}finally{c.f()}d+="Z",a.center=Object(t.jsx)("path",{d:d,className:"forward-asphalt"})}(function(r,a){if(!a.roadLength&&!a.roadWidth)return null;var e,t=Object(o.a)(r);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,d=(n.numberOfForward+n.numberOfBackward-1)*a.roadWidth/2,c=0;c<n.numberOfForward+n.numberOfBackward;c++){var s=i(u(d-c*a.roadWidth,n.angle-90),u(a.maxRoadWidth*a.roadWidth,n.angle)),f=i(s,u(a.roadLength,n.angle));c>=n.numberOfBackward?n.forward.push({first:s,last:f}):n.backward.push({first:s,last:f})}}catch(l){t.e(l)}finally{t.f()}return r}(a,s),r,s),Object(t.jsxs)("svg",{id:"artboard",ref:e,children:[r.asphalt.elements.forward,r.asphalt.elements.backward,r.debug.elements.forward,r.debug.elements.backward,r.center]})}function b(r,a,e,n,d){switch(n){case"asphalt":var c,s=Object(o.a)(r[e]);try{for(s.s();!(c=s.n()).done;){var f=c.value,l="",b=i(d,f.first),w=i(u(d.roadWidth/2,r.angle-90),b),h=i(i(d,f.last),u(d.roadWidth/2,r.angle-90)),m=i(u(d.roadWidth,r.angle+90),h),x=i(u(d.roadWidth/2,r.angle+90),b);l+="M "+b.x+" "+b.y+" ",l+="L "+w.x+" "+w.y+" ",l+="L "+h.x+" "+h.y+" ",l+="L "+m.x+" "+m.y+" ",l+="L "+x.x+" "+x.y+" ",l+="Z",a[n].strings[e].push(l)}}catch(j){s.e(j)}finally{s.f()}a[n].elements[e]=a[n].strings[e].map((function(r,a){return Object(t.jsx)("path",{d:r,className:e+"-"+n},a)}));break;case"debug":var y,g=Object(o.a)(r[e]);try{for(g.s();!(y=g.n()).done;){var O=y.value,k={x1:d.x+O.first.x,y1:d.y+O.first.y,x2:d.x+O.last.x,y2:d.y+O.last.y};a[n].strings[e].push(k)}}catch(j){g.e(j)}finally{g.f()}a[n].elements[e]=a[n].strings[e].map((function(r,a){return Object(t.jsx)("line",{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,className:e+"-"+n},a)}));break;default:console.error("Wrong road layer")}}function w(){return Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(l,{})})}s.a.render(Object(t.jsx)(d.a.StrictMode,{children:Object(t.jsx)(w,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.da04057e.chunk.js.map