(this.webpackJsonpsim=this.webpackJsonpsim||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),o=r.n(a),s=r(7),c=r.n(s),l=(r(14),r(3)),d=r(2),i=r(8),u=r(4);function f(e){if(!e||!e.length)return null;var t,r="",n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r+=a.letter+" ",a.coords){var o,s=Object(u.a)(a.coords);try{for(s.s();!(o=s.n()).done;){var c=o.value;r+=c.x+" "+c.y+" "}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}return r}function m(e){var t=Object(a.useRef)(),r=Object(a.useState)({}),o=Object(d.a)(r,2),s=o[0],c=o[1],m=Object(a.useState)([{numberOfBackward:1,numberOfForward:2,angle:0,index:0},{numberOfBackward:1,numberOfForward:1,angle:110,index:1},{numberOfBackward:2,numberOfForward:3,angle:170,index:2},{numberOfBackward:1,numberOfForward:1,angle:300,index:3}]),g=Object(d.a)(m,2),w=g[0],p=g[1],x=Object(i.a)((function(e){var t=e.event,r=Object(d.a)(e.args,1)[0];if(t.x&&t.y){var n=h(t,function(e,t){var r=e.x*t,n=e.y*t;return{x:r,y:n}}(s,-1)),a=Math.atan2(n.y,n.x)*(180/Math.PI);(a%=360)<0&&(a+=360);var o=w.map((function(e){return Object(l.a)({},e)}));o[r].angle=a,p(o)}}));Object(a.useEffect)((function(){function e(){var e=function(e,t){if(!e.current)return null;var r=e.current.getBoundingClientRect(),n=(r.right-r.left)/2,a=(r.bottom-r.top)/2,o=Math.max.apply(Math,t.map((function(e){return e.numberOfForward+e.numberOfBackward}))),s=Math.min(n,a);return{x:n,y:a,roadLength:s/2,roadWidth:s/o*.4,maxRoadWidth:o}}(t,w);c(e)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t,w]);var O=function(e,t,r,a){if(!e||!t)return null;for(var o={debug:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},asphalt:{elements:{forward:[],backward:[]},strings:{forward:[],backward:[]}},line:{elements:{striped:[],continous:[]},strings:{striped:[],continous:[]}},center:{},curb:{}},s={rotate:{strings:[]},lanes:{strings:{forward:{add:[],remove:[]},backward:{add:[],remove:[]}},elements:{forward:{},backward:{}}}},c={offsetBottom:function(e){return h(t,e.first)},offsetTop:function(e){return h(t,e.last)},halfRoadLeft:function(e){return b(t.roadWidth/2,e.angle-90)},halfRoadRight:function(e){return b(t.roadWidth/2,e.angle+90)},laneBottomLeft:function(e,t){return h(c.halfRoadLeft(t),c.offsetBottom(e))},laneTopLeft:function(e,t){return h(c.halfRoadLeft(t),c.offsetTop(e))},laneBottomRight:function(e,t){return h(c.halfRoadRight(t),c.offsetBottom(e))},laneTopRight:function(e,t){return h(c.halfRoadRight(t),c.offsetTop(e))},roadBottomLeft:function(e){return h(h(e.backward[0].first,t),c.halfRoadLeft(e))},roadBottomRight:function(e){return h(h(e.forward[e.forward.length-1].first,t),c.halfRoadRight(e))},roadTopLeft:function(e){return h(h(e.backward[0].last,t),c.halfRoadLeft(e))},roadTopRight:function(e){return h(h(e.forward[e.forward.length-1].last,t),c.halfRoadRight(e))},roadTopMiddle:function(e){return h(b(t.roadLength,e.angle),h(b((e.numberOfForward+e.numberOfBackward)*t.roadWidth/2,e.angle+90),c.roadBottomLeft(e)))}},i=function(){var r,l=g[m],i=Object(u.a)(e.entries());try{for(i.s();!(r=i.n()).done;){var w,p=Object(d.a)(r.value,2),x=p[0],O=p[1],j=Object(u.a)(O[l].entries());try{for(j.s();!(w=j.n()).done;){var y=Object(d.a)(w.value,2),v=y[0],k=y[1];o.asphalt.strings[l].push(f([{letter:"M",coords:[c.offsetBottom(k)]},{letter:"L",coords:[c.laneBottomLeft(k,O),c.laneTopLeft(k,O),c.laneTopRight(k,O),c.laneBottomRight(k,O)]},{letter:"Z"}])),o.debug.strings[l].push([c.offsetBottom(k),c.offsetTop(k)]),v===O[l].length-1&&"backward"!==l||(v===O[l].length-1&&"backward"===l?o.line.strings.continous.push([c.laneBottomRight(k,O),c.laneTopRight(k,O)]):o.line.strings.striped.push([c.laneBottomRight(k,O),c.laneTopRight(k,O)]))}}catch(B){j.e(B)}finally{j.f()}"backward"===l&&s.rotate.strings.push(c.roadTopMiddle(O)),0===x&&(o.center.string=f([{letter:"M",coords:[c.roadBottomLeft(O)]}])),o.center.string+=f([{letter:"L",coords:[c.roadBottomLeft(O),c.roadBottomRight(O)]}]),o.coordInfo=Object(n.jsx)("circle",{cx:t.x,cy:t.y,r:"5"}),0===x&&(o.curb.string=f([{letter:"M",coords:[c.roadBottomLeft(O)]}])),o.curb.string+=f([{letter:"L",coords:[c.roadBottomLeft(O),c.roadTopLeft(O)]},{letter:"M",coords:[c.roadTopRight(O)]},{letter:"L",coords:[c.roadBottomRight(O)]}]),x===e.length-1&&(o.curb.string+=f([{letter:"L",coords:[c.roadBottomLeft(e[0])]}])),o.asphalt.elements[l]=o.asphalt.strings[l].map((function(e,t){return Object(n.jsx)("path",{d:e,className:l+"-asphalt"},t)})),o.debug.elements[l]=o.debug.strings[l].map((function(e,t){return Object(n.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,className:l+"-debug"},t)})),o.line.elements.striped=o.line.strings.striped.map((function(e,t){return Object(n.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,className:l+"-line",strokeDasharray:"30, 60"},t)})),o.line.elements.continous=o.line.strings.continous.map((function(e,t){return Object(n.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,className:l+"-line"},t)})),"backward"===l&&(s.lanes.strings.forward.remove.push(h(c.roadBottomLeft(O),b(t.roadLength/3,O.angle))),s.lanes.strings.forward.add.push(h(c.roadBottomLeft(O),b(2*t.roadLength/3,O.angle))),s.lanes.strings.backward.remove.push(h(c.roadBottomRight(O),b(t.roadLength/3,O.angle))),s.lanes.strings.backward.add.push(h(c.roadBottomRight(O),b(2*t.roadLength/3,O.angle))),s.lanes.elements.forward.remove=s.lanes.strings.forward.remove.map((function(e,t){return Object(n.jsx)("circle",{cx:e.x,cy:e.y,r:"10",className:"add-lane",onClick:function(){return a(t,"Forward",-1)}},t)})),s.lanes.elements.forward.add=s.lanes.strings.forward.add.map((function(e,t){return Object(n.jsx)("circle",{cx:e.x,cy:e.y,r:"10",className:"add-lane",onClick:function(){return a(t,"Forward",1)}},t)})),s.lanes.elements.backward.remove=s.lanes.strings.backward.remove.map((function(e,t){return Object(n.jsx)("circle",{cx:e.x,cy:e.y,r:"10",className:"add-lane",onClick:function(){return a(t,"Backward",-1)}},t)})),s.lanes.elements.backward.add=s.lanes.strings.backward.add.map((function(e,t){return Object(n.jsx)("circle",{cx:e.x,cy:e.y,r:"10",className:"add-lane",onClick:function(){return a(t,"Backward",1)}},t)})))}}catch(B){i.e(B)}finally{i.f()}},m=0,g=["forward","backward"];m<g.length;m++)i();return o.center.element=Object(n.jsx)("path",{d:o.center.string,className:"center"}),o.curb.element=Object(n.jsx)("path",{d:o.curb.string,className:"curb"}),s.rotate.elements=s.rotate.strings.map((function(e,t){return Object(n.jsx)("circle",Object(l.a)({cx:e.x,cy:e.y,r:"10",className:"rotate"},r(t)),t)})),[o,s]}(function(e,t){var r=[];if(!(t&&t.roadLength&&t.roadWidth))return null;for(var n=0;n<e.length;n++){var a=e[n],o=(a.numberOfForward+a.numberOfBackward-1)*t.roadWidth/2;r[n]={forward:[],backward:[],maxDistance:o,angle:a.angle,numberOfForward:a.numberOfForward,numberOfBackward:a.numberOfBackward};for(var s=a.numberOfForward+a.numberOfBackward,c=0;c<s;c++){var l=h(b(o-c*t.roadWidth,a.angle-90),b(t.maxRoadWidth*t.roadWidth*.8,a.angle)),d=h(l,b(t.roadLength,a.angle));c>=a.numberOfForward?r[n].forward.push({first:l,last:d}):r[n].backward.push({first:l,last:d})}}return r}(w,s),s,x,(function(e,t,r){var n=w.map((function(e){return Object(l.a)({},e)}));(n[e]["numberOf"+t]>1||r>0)&&(n[e]["numberOf"+t]+=r),p(n)})),j=O||[null,null],y=Object(d.a)(j,2),v=y[0],k=y[1];return Object(n.jsx)("div",{style:{touchAction:"none"},children:Object(n.jsxs)("svg",{className:"artboard",ref:t,children:[v?v.asphalt.elements.forward:null,v?v.asphalt.elements.backward:null,v?v.center.element:null,v?v.curb.element:null,v?v.line.elements.continous:null,v?v.line.elements.striped:null,v?v.coordInfo:null,k?k.rotate.elements:null,k?k.lanes.elements.forward.remove:null,k?k.lanes.elements.forward.add:null,k?k.lanes.elements.backward.remove:null,k?k.lanes.elements.backward.add:null,v?null:Object(n.jsx)("text",{children:"Loading"})]})})}function b(e,t){var r=t*Math.PI/180;return{x:e*Math.cos(r),y:e*Math.sin(r)}}function h(e,t){return{x:e.x+t.x,y:e.y+t.y}}function g(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(m,{})})}c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9cdc6750.chunk.js.map