{"version":3,"sources":["buildRoad.js","Artboard.js","img/forward.svg","img/give way.svg","img/left.svg","img/right.svg","img/stop.svg","img/priority.svg","Inventory.js","App.js","index.js"],"names":["vectors","offsetBottom","lane","coordInfo","sumVector","first","offsetTop","last","halfRoadLeft","road","lenDeg","roadWidth","angle","halfRoadRight","laneBottomLeft","laneTopLeft","laneBottomRight","laneTopRight","roadBottomLeft","backward","roadBottomRight","forward","length","roadTopLeft","roadTopRight","roadTopMiddle","roadLength","numberOfForward","numberOfBackward","pointsToString","pointsArray","pathD","order","letter","coords","x","y","SvgGroup","accept","onDrop","indexRoad","children","side","useDrop","drop","item","dropBind","ref","Asphalt","string","indexLane","d","className","Debug","points","disabled","debug","strings","elements","push","map","index","x1","y1","x2","y2","Line","line","continous","striped","entries","strokeDasharray","RotateControl","rotateBind","rotate","cx","cy","r","LaneControl","addLanes","remove","add","onClick","Center","center","element","Curb","curb","_","require","Artboard","artboardRef","useRef","useState","setCoordInfo","roadInfo","setRoadInfo","useDrag","event","args","newPoint","a","k","multVector","deg","Math","atan2","PI","newRoadInfo","cloneDeep","sort","b","i","useEffect","changeCoordInfo","newCoord","current","clientRect","getBoundingClientRect","right","left","bottom","top","maxRoadWidth","max","apply","windowBox","min","getCoordinateInfo","window","addEventListener","removeEventListener","maxDistance","allLanes","j","firstPoint","lastPoint","calculatePoints","objectInfo","setObjectInfo","console","log","asphaltElements","handleSignDrop","handleCarDrop","makeAsphalt","newObjectInfo","signs","style","touchAction","cos","sin","Inventory","Signs","give_way","stop","priority","image","Sign","src","Car","id","type","drag","draggable","IconButton","alt","App","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","document","getElementById"],"mappings":"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","file":"static/js/main.3c5d844c.chunk.js","sourcesContent":["import React from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { sumVector, lenDeg } from \"./Artboard\";\n\nconst vectors = {\n  offsetBottom: (lane, coordInfo) => sumVector(coordInfo, lane.first),\n\n  offsetTop: (lane, coordInfo) => sumVector(coordInfo, lane.last),\n\n  halfRoadLeft: (road, coordInfo) =>\n    lenDeg(coordInfo.roadWidth / 2, road.angle - 90),\n\n  halfRoadRight: (road, coordInfo) =>\n    lenDeg(coordInfo.roadWidth / 2, road.angle + 90),\n\n  laneBottomLeft: (lane, road, coordInfo) =>\n    sumVector(\n      vectors.halfRoadLeft(road, coordInfo),\n      vectors.offsetBottom(lane, coordInfo)\n    ),\n\n  laneTopLeft: (lane, road, coordInfo) =>\n    sumVector(\n      vectors.halfRoadLeft(road, coordInfo),\n      vectors.offsetTop(lane, coordInfo)\n    ),\n\n  laneBottomRight: (lane, road, coordInfo) =>\n    sumVector(\n      vectors.halfRoadRight(road, coordInfo),\n      vectors.offsetBottom(lane, coordInfo)\n    ),\n\n  laneTopRight: (lane, road, coordInfo) =>\n    sumVector(\n      vectors.halfRoadRight(road, coordInfo),\n      vectors.offsetTop(lane, coordInfo)\n    ),\n\n  roadBottomLeft: (road, coordInfo) =>\n    sumVector(\n      sumVector(road.backward[0].first, coordInfo),\n      vectors.halfRoadLeft(road, coordInfo)\n    ),\n\n  roadBottomRight: (road, coordInfo) =>\n    sumVector(\n      sumVector(road.forward[road.forward.length - 1].first, coordInfo),\n      vectors.halfRoadRight(road, coordInfo)\n    ),\n  roadTopLeft: (road, coordInfo) =>\n    sumVector(\n      sumVector(road.backward[0].last, coordInfo),\n      vectors.halfRoadLeft(road, coordInfo)\n    ),\n\n  roadTopRight: (road, coordInfo) =>\n    sumVector(\n      sumVector(road.forward[road.forward.length - 1].last, coordInfo),\n      vectors.halfRoadRight(road, coordInfo)\n    ),\n\n  roadTopMiddle: (road, coordInfo) =>\n    sumVector(\n      lenDeg(coordInfo.roadLength, road.angle),\n      sumVector(\n        lenDeg(\n          ((road.numberOfForward + road.numberOfBackward) *\n            coordInfo.roadWidth) /\n            2,\n          road.angle + 90\n        ),\n        vectors.roadBottomLeft(road, coordInfo)\n      )\n    ),\n};\n\nexport function pointsToString(pointsArray) {\n  if (!(pointsArray && pointsArray.length)) {\n    return null;\n  }\n\n  let pathD = \"\";\n\n  for (const order of pointsArray) {\n    pathD += order.letter + \" \";\n\n    if (order.coords) {\n      for (const coords of order.coords) {\n        pathD += coords.x + \" \" + coords.y + \" \";\n      }\n    }\n  }\n  return pathD;\n}\n\nexport function makeAsphalt({\n  points,\n  coordInfo,\n  handleSignDrop,\n  handleCarDrop,\n}) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const elements = { forward: [], backward: [] };\n\n  for (const [indexRoad, road] of points.entries()) {\n    let strings = { forward: [], backward: [] };\n\n    for (const side of [\"forward\", \"backward\"]) {\n      for (const lane of road[side]) {\n        strings[side].push(\n          pointsToString([\n            { letter: \"M\", coords: [vectors.offsetBottom(lane, coordInfo)] },\n            {\n              letter: \"L\",\n              coords: [\n                vectors.laneBottomLeft(lane, road, coordInfo),\n                vectors.laneTopLeft(lane, road, coordInfo),\n                vectors.laneTopRight(lane, road, coordInfo),\n                vectors.laneBottomRight(lane, road, coordInfo),\n              ],\n            },\n            { letter: \"Z\" },\n          ])\n        );\n      }\n    }\n\n    for (const side of [\"forward\", \"backward\"]) {\n      elements[side].push(\n        <SvgGroup\n          key={indexRoad}\n          indexRoad={indexRoad}\n          accept={[\"sign\"]}\n          side={side}\n          onDrop={(item) => handleSignDrop(item, indexRoad, side)}\n        >\n          {strings[side].map((string, index) => (\n            <Asphalt\n              string={string}\n              side={side}\n              indexLane={index}\n              indexRoad={indexRoad}\n              accept={[\"car\"]}\n              onDrop={(item) => handleCarDrop(item, indexRoad, side, index)}\n              key={index}\n            />\n          ))}\n        </SvgGroup>\n      );\n    }\n  }\n  return elements;\n}\n\nfunction SvgGroup({accept, onDrop, indexRoad, children, side}) {\n  const [, dropBind] = useDrop({\n    accept,\n    drop: (item) => onDrop(item, indexRoad, side),\n  });\n\n  return (<g ref={dropBind}>{children}</g>)\n}\n\nfunction Asphalt({\n  string,\n  side,\n  indexLane,\n  indexRoad,\n  accept,\n  onDrop,\n}) {\n  const [, dropBind] = useDrop({\n    accept,\n    drop: (item) => onDrop(item, indexRoad, side, indexLane),\n  });\n\n  return (\n    <path\n      ref={dropBind}\n      d={string}\n      key={indexLane}\n      className={side + \"-asphalt\"}\n    />\n  );\n}\n\nexport function Debug({ points, coordInfo, disabled = false }) {\n  if (!(points && coordInfo && !disabled)) {\n    return null;\n  }\n\n  const debug = {\n    strings: { forward: [], backward: [] },\n    elements: {},\n  };\n\n  for (const side of [\"forward\", \"backward\"]) {\n    for (const road of points) {\n      for (const lane of road[side]) {\n        debug.strings[side].push([\n          vectors.offsetBottom(lane, coordInfo),\n          vectors.offsetTop(lane, coordInfo),\n        ]);\n      }\n    }\n\n    debug.elements[side] = debug.strings[side].map((coords, index) => (\n      <line\n        x1={coords[0].x}\n        y1={coords[0].y}\n        x2={coords[1].x}\n        y2={coords[1].y}\n        key={index}\n        className={side + \"-debug\"}\n      />\n    ));\n  }\n\n  return (\n    <g>\n      {debug.elements.forward}\n      {debug.elements.backward}\n    </g>\n  );\n}\n\nexport function Line({ points, coordInfo }) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const line = {\n    elements: {},\n    strings: { continous: [], striped: [] },\n  };\n\n  for (const side of [\"forward\", \"backward\"]) {\n    for (const road of points) {\n      for (const [indexLane, lane] of road[side].entries()) {\n        if (indexLane !== road[side].length - 1 || side === \"backward\") {\n          if (indexLane === road[side].length - 1 && side === \"backward\") {\n            line.strings.continous.push([\n              vectors.laneBottomRight(lane, road, coordInfo),\n              vectors.laneTopRight(lane, road, coordInfo),\n            ]);\n          } else {\n            line.strings.striped.push([\n              vectors.laneBottomRight(lane, road, coordInfo),\n              vectors.laneTopRight(lane, road, coordInfo),\n            ]);\n          }\n        }\n      }\n    }\n  }\n\n  line.elements.continous = line.strings.continous.map((coords, index) => (\n    <line\n      x1={coords[0].x}\n      y1={coords[0].y}\n      x2={coords[1].x}\n      y2={coords[1].y}\n      key={index}\n      className=\"line\"\n    />\n  ));\n\n  line.elements.striped = line.strings.striped.map((coords, index) => (\n    <line\n      x1={coords[0].x}\n      y1={coords[0].y}\n      x2={coords[1].x}\n      y2={coords[1].y}\n      key={index}\n      className=\"line\"\n      strokeDasharray=\"30, 60\"\n    />\n  ));\n\n  return (\n    <g>\n      {line.elements.continous}\n      {line.elements.striped}\n    </g>\n  );\n}\n\nexport function RotateControl({ points, coordInfo, rotateBind }) {\n  if (!(points && coordInfo && rotateBind)) {\n    return null;\n  }\n\n  const rotate = {\n    strings: [],\n  };\n\n  for (const road of points) {\n    rotate.strings.push({\n      vectors: vectors.roadTopMiddle(road, coordInfo),\n      order: road.order,\n    });\n  }\n\n  rotate.elements = rotate.strings.map((coords, index) => (\n    <circle\n      cx={coords.vectors.x}\n      cy={coords.vectors.y}\n      r=\"10\"\n      className=\"rotate\"\n      key={index}\n      {...rotateBind(coords.order)}\n    />\n  ));\n\n  return <g>{rotate.elements}</g>;\n}\n\nexport function LaneControl({ points, coordInfo, addLanes }) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const lane = {\n    strings: {\n      forward: { remove: [], add: [] },\n      backward: { remove: [], add: [] },\n    },\n    elements: {\n      forward: { remove: [], add: [] },\n      backward: { remove: [], add: [] },\n    },\n  };\n\n  for (const road of points) {\n    lane.strings.forward.remove.push(\n      sumVector(\n        vectors.roadBottomLeft(road, coordInfo),\n        lenDeg(coordInfo.roadLength / 3, road.angle)\n      )\n    );\n\n    lane.strings.forward.add.push(\n      sumVector(\n        vectors.roadBottomLeft(road, coordInfo),\n        lenDeg((coordInfo.roadLength * 2) / 3, road.angle)\n      )\n    );\n\n    lane.strings.backward.remove.push(\n      sumVector(\n        vectors.roadBottomRight(road, coordInfo),\n        lenDeg(coordInfo.roadLength / 3, road.angle)\n      )\n    );\n\n    lane.strings.backward.add.push(\n      sumVector(\n        vectors.roadBottomRight(road, coordInfo),\n        lenDeg((coordInfo.roadLength * 2) / 3, road.angle)\n      )\n    );\n  }\n\n  lane.elements.forward.remove = lane.strings.forward.remove.map(\n    (coords, index) => (\n      <circle\n        cx={coords.x}\n        cy={coords.y}\n        r=\"10\"\n        className=\"add-lane\"\n        key={index}\n        onClick={() => addLanes(index, \"Forward\", -1)}\n      />\n    )\n  );\n\n  lane.elements.forward.add = lane.strings.forward.add.map((coords, index) => (\n    <circle\n      cx={coords.x}\n      cy={coords.y}\n      r=\"10\"\n      className=\"add-lane\"\n      key={index}\n      onClick={() => addLanes(index, \"Forward\", 1)}\n    />\n  ));\n\n  lane.elements.backward.remove = lane.strings.backward.remove.map(\n    (coords, index) => (\n      <circle\n        cx={coords.x}\n        cy={coords.y}\n        r=\"10\"\n        className=\"add-lane\"\n        key={index}\n        onClick={() => addLanes(index, \"Backward\", -1)}\n      />\n    )\n  );\n\n  lane.elements.backward.add = lane.strings.backward.add.map(\n    (coords, index) => (\n      <circle\n        cx={coords.x}\n        cy={coords.y}\n        r=\"10\"\n        className=\"add-lane\"\n        key={index}\n        onClick={() => addLanes(index, \"Backward\", 1)}\n      />\n    )\n  );\n\n  return (\n    <g>\n      {lane.elements.forward.remove}\n      {lane.elements.forward.add}\n      {lane.elements.backward.remove}\n      {lane.elements.backward.add}\n    </g>\n  );\n}\n\nexport function Center({ points, coordInfo }) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const center = {};\n\n  center.string = pointsToString([\n    {\n      letter: \"M\",\n      coords: [vectors.roadBottomLeft(points[0], coordInfo)],\n    },\n  ]);\n\n  for (const road of points) {\n    center.string += pointsToString([\n      {\n        letter: \"L\",\n        coords: [\n          vectors.roadBottomLeft(road, coordInfo),\n          vectors.roadBottomRight(road, coordInfo),\n        ],\n      },\n    ]);\n  }\n\n  center.element = <path d={center.string} className=\"center\" />;\n\n  return center.element;\n}\n\nexport function Curb({ points, coordInfo }) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const curb = {};\n\n  curb.string = pointsToString([\n    {\n      letter: \"M\",\n      coords: [vectors.roadBottomLeft(points[0], coordInfo)],\n    },\n  ]);\n\n  for (const [indexRoad, road] of points.entries()) {\n    curb.string += pointsToString([\n      {\n        letter: \"L\",\n        coords: [\n          vectors.roadBottomLeft(road, coordInfo),\n          vectors.roadTopLeft(road, coordInfo),\n        ],\n      },\n      {\n        letter: \"M\",\n        coords: [vectors.roadTopRight(road, coordInfo)],\n      },\n      {\n        letter: \"L\",\n        coords: [vectors.roadBottomRight(road, coordInfo)],\n      },\n    ]);\n    if (indexRoad === points.length - 1) {\n      curb.string += pointsToString([\n        {\n          letter: \"L\",\n          coords: [vectors.roadBottomLeft(points[0], coordInfo)],\n        },\n      ]);\n    }\n  }\n\n  curb.element = <path d={curb.string} className=\"curb\" />;\n\n  return curb.element;\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { useDrag } from \"react-use-gesture\";\nimport {\n  makeAsphalt,\n  Debug,\n  Line,\n  RotateControl,\n  LaneControl,\n  Center,\n  Curb,\n} from \"./buildRoad\";\nconst _ = require(\"lodash\");\n\nexport default function Artboard() {\n  /* svg ref */\n  const artboardRef = useRef();\n\n  const [coordInfo, setCoordInfo] = useState({});\n\n  const [roadInfo, setRoadInfo] = useState([\n    {\n      numberOfBackward: 1,\n      numberOfForward: 2,\n      angle: 0,\n      order: 0,\n    },\n    {\n      numberOfBackward: 1,\n      numberOfForward: 1,\n      angle: 110,\n      order: 1,\n    },\n    {\n      numberOfBackward: 2,\n      numberOfForward: 3,\n      angle: 170,\n      order: 2,\n    },\n    {\n      numberOfBackward: 1,\n      numberOfForward: 1,\n      angle: 300,\n      order: 3,\n    },\n  ]);\n\n  const rotateBind = useDrag(({ event, args: [order] }) => {\n    if (event.x && event.y) {\n      const newPoint = sumVector(event, multVector(coordInfo, -1));\n      const newAngle = Math.atan2(newPoint.y, newPoint.x);\n\n      let deg = newAngle * (180 / Math.PI);\n      deg %= 360;\n      if (deg < 0) {\n        deg += 360;\n      }\n\n      const newRoadInfo = _.cloneDeep(roadInfo);\n      newRoadInfo.sort((a, b) => a.angle - b.angle);\n\n      for (let i = 0; i < newRoadInfo.length; i++) {\n        if (order === newRoadInfo[i].order) {\n          newRoadInfo[i].angle = deg;\n        }\n      }\n\n      setRoadInfo(newRoadInfo);\n    }\n  });\n\n  function addLanes(index, side, add) {\n    const newRoadInfo = _.cloneDeep(roadInfo);\n\n    const numberOfLanes = newRoadInfo[index][\"numberOf\" + side];\n\n    if (numberOfLanes > 1 || add > 0) {\n      newRoadInfo[index][\"numberOf\" + side] += add;\n    }\n\n    setRoadInfo(newRoadInfo);\n  }\n\n  useEffect(() => {\n    function changeCoordInfo() {\n      /* get coordinates of the svg element */\n      const newCoord = getCoordinateInfo(artboardRef, roadInfo);\n      /* sets state */\n      setCoordInfo(newCoord);\n    }\n\n    changeCoordInfo();\n    /* call getCoordinateInfo on every window change */\n    window.addEventListener(\"resize\", changeCoordInfo);\n\n    return () => {\n      window.removeEventListener(\"resize\", changeCoordInfo);\n    };\n  }, [artboardRef, roadInfo]);\n\n  /* get a list of all the road points */\n  const points = calculatePoints(roadInfo, coordInfo);\n\n  const [objectInfo, setObjectInfo] = useState([\n    { backward: [], forward: [] },\n    { backward: [], forward: [] },\n    { backward: [], forward: [] },\n    { backward: [], forward: [] },\n  ]);\n\n  function handleCarDrop(item, indexRoad, side, indexLane) {\n    const newObjectInfo = _.cloneDeep(objectInfo);\n\n    if (!newObjectInfo[indexRoad][side][indexLane]) {\n      newObjectInfo[indexRoad][side][indexLane] = [];\n    }\n\n    newObjectInfo[indexRoad][side][indexLane].push(item);\n    setObjectInfo(newObjectInfo);\n  }\n\n  function handleSignDrop(item, indexRoad, side) {\n    if (side === \"forward\") {\n      const newObjectInfo = _.cloneDeep(objectInfo);\n      \n      if (!newObjectInfo[indexRoad].signs) {\n        newObjectInfo[indexRoad].signs = [];\n      }\n\n      newObjectInfo[indexRoad].signs.push(item);\n      setObjectInfo(newObjectInfo);\n    }\n  }\n\n  console.log(objectInfo)\n\n  const asphaltElements = makeAsphalt({\n    points,\n    coordInfo,\n    handleSignDrop,\n    handleCarDrop,\n  });\n\n  return (\n    // touch-action ensures that chrome doesnt stop the drag after a few frames,\n    // but it doesn't work on svg elements, so I wraped it in a div,\n    // https://stackoverflow.com/questions/45678190/dynamically-disabling-touch-action-overscroll-for-svg-elements\n\n    <div style={{ touchAction: \"none\" }}>\n      <svg className=\"artboard\" ref={artboardRef}>\n        <g>\n          {asphaltElements ? asphaltElements.backward : null}\n          {asphaltElements ? asphaltElements.forward : null}\n        </g>\n        <Center points={points} coordInfo={coordInfo} />\n        <Curb points={points} coordInfo={coordInfo} />\n        <Line points={points} coordInfo={coordInfo} />\n        <Debug points={points} coordInfo={coordInfo} disabled />\n        <RotateControl\n          points={points}\n          coordInfo={coordInfo}\n          rotateBind={rotateBind}\n        />\n        <LaneControl\n          points={points}\n          coordInfo={coordInfo}\n          addLanes={addLanes}\n        />\n      </svg>\n    </div>\n  );\n}\n\nfunction calculatePoints(roadInfo, coordInfo) {\n  const points = [];\n\n  if (!(coordInfo && coordInfo.roadLength && coordInfo.roadWidth)) {\n    return null;\n  }\n\n  for (let i = 0; i < roadInfo.length; i++) {\n    const road = roadInfo[i];\n\n    /* maxDistance = pixels from the center to the edge */\n    const maxDistance =\n      ((road.numberOfForward + road.numberOfBackward - 1) *\n        coordInfo.roadWidth) /\n      2;\n    points[i] = {\n      forward: [],\n      backward: [],\n      maxDistance,\n      angle: road.angle,\n      order: road.order,\n      numberOfForward: road.numberOfForward,\n      numberOfBackward: road.numberOfBackward,\n    };\n\n    const allLanes = road.numberOfForward + road.numberOfBackward;\n\n    for (let j = 0; j < allLanes; j++) {\n      let firstPoint = sumVector(\n        /* sum vector pointing east to get left or right */\n        lenDeg(maxDistance - j * coordInfo.roadWidth, road.angle - 90),\n        /* and the vector, responsible for making the center area */\n        lenDeg(coordInfo.maxRoadWidth * coordInfo.roadWidth * 0.7, road.angle)\n      );\n\n      let lastPoint = sumVector(\n        firstPoint,\n        lenDeg(coordInfo.roadLength, road.angle)\n      );\n\n      if (j >= road.numberOfForward) {\n        points[i].forward.push({ first: firstPoint, last: lastPoint });\n      } else {\n        points[i].backward.push({ first: firstPoint, last: lastPoint });\n      }\n    }\n  }\n  return points;\n}\n\nexport function lenDeg(d, angle) {\n  const deg = (angle * Math.PI) / 180;\n  const x = d * Math.cos(deg);\n  const y = d * Math.sin(deg);\n  return { x, y };\n}\n\nexport function sumVector(a, b) {\n  const x = a.x + b.x;\n  const y = a.y + b.y;\n  return { x, y };\n}\n\nexport function multVector(a, k) {\n  const x = a.x * k;\n  const y = a.y * k;\n  return { x, y };\n}\n\nexport function getCoordinateInfo(element, roadInfo) {\n  if (!element.current) {\n    return null;\n  }\n\n  const clientRect = element.current.getBoundingClientRect();\n  const x = (clientRect.right - clientRect.left) / 2;\n  const y = (clientRect.bottom - clientRect.top) / 2;\n\n  const maxRoadWidth = Math.max.apply(\n    Math,\n    roadInfo.map((road) => {\n      return road.numberOfForward + road.numberOfBackward;\n    })\n  );\n  const windowBox = Math.min(x, y);\n  const roadLength = windowBox / 2;\n  const roadWidth = (windowBox / maxRoadWidth) * 0.5;\n\n  return { x, y, roadLength, roadWidth, maxRoadWidth };\n}\n","export default __webpack_public_path__ + \"static/media/forward.fc55a6c4.svg\";","export default __webpack_public_path__ + \"static/media/give way.db0b54fd.svg\";","export default __webpack_public_path__ + \"static/media/left.1aa9e07d.svg\";","export default __webpack_public_path__ + \"static/media/right.ff8f1205.svg\";","export default __webpack_public_path__ + \"static/media/stop.4938481c.svg\";","export default __webpack_public_path__ + \"static/media/priority.1971fe2a.svg\";","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { useDrag } from \"react-dnd\";\n\nimport forward from \"./img/forward.svg\";\nimport give_way from \"./img/give way.svg\";\nimport left from \"./img/left.svg\";\nimport right from \"./img/right.svg\";\nimport stop from \"./img/stop.svg\";\nimport priority from \"./img/priority.svg\";\n\nexport function Inventory() {\n  const images = [forward, give_way, left, right, stop, priority];\n  const Signs = images.map((image, index) => (\n    <Sign src={image} key={index} index={index} />\n  ));\n\n  return <div className=\"inventory\">{Signs}<Car /></div>;\n}\n\nfunction Car() {\n  const [, drag] = useDrag({\n    item: { id: \"car\", type: \"car\" },\n  });\n\n  return (\n    <div className=\"drag\" ref={drag}>\n      <div className=\"item car\" draggable={false} ></div>\n    </div>\n  );\n}\n\nfunction Sign({src, index}) {\n  const [, drag] = useDrag({\n    item: { id: index, type: \"sign\" },\n    /* end: (item, monitor) => {\n      const dropResult = monitor.getDropResult();\n      console.log(item, dropResult, \"from item\")\n    } */\n  });\n\n  return (\n    <IconButton className=\"drag\" ref={drag}>\n      <img src={src} className=\"item sign\" alt={src} draggable={false} />\n    </IconButton>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Artboard from \"./Artboard.js\";\nimport { Inventory } from \"./Inventory\";\n\nexport default function App() {\n  return (\n    <>\n      <Inventory />\n      <Artboard />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { DndProvider } from \"react-dnd\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <DndProvider backend={HTML5Backend}>\n      <App />\n    </DndProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}