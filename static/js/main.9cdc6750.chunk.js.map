{"version":3,"sources":["buildRoad.js","Artboard.js","App.js","index.js"],"names":["pointsToString","pointsArray","length","pathD","order","letter","coords","x","y","Artboard","props","artboardRef","useRef","useState","coordInfo","setCoordInfo","numberOfBackward","numberOfForward","angle","index","roadInfo","setRoadInfo","rotate","useDrag","event","args","newPoint","sumVector","a","k","multVector","deg","Math","atan2","PI","newRoadInfo","map","useEffect","changeCoordInfo","newCoord","element","current","clientRect","getBoundingClientRect","right","left","bottom","top","maxRoadWidth","max","apply","road","windowBox","min","roadLength","roadWidth","getCoordinateInfo","window","addEventListener","removeEventListener","temp","points","addLanes","roads","debug","elements","forward","backward","strings","asphalt","line","striped","continous","center","curb","controls","lanes","add","remove","vectors","offsetBottom","lane","first","offsetTop","last","halfRoadLeft","lenDeg","halfRoadRight","laneBottomLeft","laneTopLeft","laneBottomRight","laneTopRight","roadBottomLeft","roadBottomRight","roadTopLeft","roadTopRight","roadTopMiddle","side","entries","indexRoad","indexLane","push","string","cx","cy","r","d","className","x1","y1","x2","y2","strokeDasharray","onClick","buildRoad","i","maxDistance","allLanes","j","firstPoint","lastPoint","calculatePoints","style","touchAction","ref","cos","sin","b","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9cdc6750.chunk.js","sourcesContent":["import React from \"react\";\nimport { sumVector, lenDeg, multVector } from \"./Artboard\";\n\nfunction pointsToString(pointsArray) {\n  if (!(pointsArray && pointsArray.length)) {\n    return null;\n  }\n\n  let pathD = \"\";\n\n  for (const order of pointsArray) {\n    pathD += order.letter + \" \";\n\n    if (order.coords) {\n      for (const coords of order.coords) {\n        pathD += coords.x + \" \" + coords.y + \" \";\n      }\n    }\n  }\n  return pathD;\n}\n\nexport function buildRoad(points, coordInfo, rotate, addLanes) {\n  if (!(points && coordInfo)) {\n    return null;\n  }\n\n  const roads = {\n    debug: {\n      elements: { forward: [], backward: [] },\n      strings: { forward: [], backward: [] },\n    },\n    asphalt: {\n      elements: { forward: [], backward: [] },\n      strings: { forward: [], backward: [] },\n    },\n    line: {\n      elements: { striped: [], continous: [] },\n      strings: { striped: [], continous: [] },\n    },\n    center: {},\n    curb: {},\n  };\n\n  const controls = {\n    rotate: { strings: [] },\n    lanes: {\n      strings: {\n        forward: { add: [], remove: [] },\n        backward: { add: [], remove: [] },\n      },\n      elements: {\n        forward: {},\n        backward: {},\n      },\n    },\n  };\n\n  const vectors = {\n    offsetBottom: (lane) => sumVector(coordInfo, lane.first),\n\n    offsetTop: (lane) => sumVector(coordInfo, lane.last),\n\n    halfRoadLeft: (road) => lenDeg(coordInfo.roadWidth / 2, road.angle - 90),\n\n    halfRoadRight: (road) => lenDeg(coordInfo.roadWidth / 2, road.angle + 90),\n\n    laneBottomLeft: (lane, road) =>\n      sumVector(vectors.halfRoadLeft(road), vectors.offsetBottom(lane)),\n\n    laneTopLeft: (lane, road) =>\n      sumVector(vectors.halfRoadLeft(road), vectors.offsetTop(lane)),\n\n    laneBottomRight: (lane, road) =>\n      sumVector(vectors.halfRoadRight(road), vectors.offsetBottom(lane)),\n\n    laneTopRight: (lane, road) =>\n      sumVector(vectors.halfRoadRight(road), vectors.offsetTop(lane)),\n\n    roadBottomLeft: (road) =>\n      sumVector(\n        sumVector(road.backward[0].first, coordInfo),\n        vectors.halfRoadLeft(road)\n      ),\n\n    roadBottomRight: (road) =>\n      sumVector(\n        sumVector(road.forward[road.forward.length - 1].first, coordInfo),\n        vectors.halfRoadRight(road)\n      ),\n    roadTopLeft: (road) =>\n      sumVector(\n        sumVector(road.backward[0].last, coordInfo),\n        vectors.halfRoadLeft(road)\n      ),\n\n    roadTopRight: (road) =>\n      sumVector(\n        sumVector(road.forward[road.forward.length - 1].last, coordInfo),\n        vectors.halfRoadRight(road)\n      ),\n\n    roadTopMiddle: (road) =>\n      sumVector(\n        lenDeg(coordInfo.roadLength, road.angle),\n        sumVector(\n          lenDeg(\n            ((road.numberOfForward + road.numberOfBackward) *\n              coordInfo.roadWidth) /\n              2,\n            road.angle + 90\n          ),\n          vectors.roadBottomLeft(road)\n        )\n      ),\n  };\n  for (const side of [\"forward\", \"backward\"]) {\n    // fill both sides of the object\n    for (const [indexRoad, road] of points.entries()) {\n      // for every road\n\n      for (const [indexLane, lane] of road[side].entries()) {\n        // for every lane\n\n        //----ASPHALT---- strings//\n        roads.asphalt.strings[side].push(\n          pointsToString([\n            { letter: \"M\", coords: [vectors.offsetBottom(lane)] },\n            {\n              letter: \"L\",\n              coords: [\n                vectors.laneBottomLeft(lane, road),\n                vectors.laneTopLeft(lane, road),\n                vectors.laneTopRight(lane, road),\n                vectors.laneBottomRight(lane, road),\n              ],\n            },\n            { letter: \"Z\" },\n          ])\n        );\n\n        //-----DEBUG----- strings//\n        roads.debug.strings[side].push([\n          vectors.offsetBottom(lane),\n          vectors.offsetTop(lane),\n        ]);\n\n        //-----LINE------ strings//\n        if (indexLane !== road[side].length - 1 || side === \"backward\") {\n          if (indexLane === road[side].length - 1 && side === \"backward\") {\n            roads.line.strings.continous.push([\n              vectors.laneBottomRight(lane, road),\n              vectors.laneTopRight(lane, road),\n            ]);\n          } else {\n            roads.line.strings.striped.push([\n              vectors.laneBottomRight(lane, road),\n              vectors.laneTopRight(lane, road),\n            ]);\n          }\n        }\n      }\n\n      //-----ROTATE---- strings//\n      if (side === \"backward\") {\n        controls.rotate.strings.push(vectors.roadTopMiddle(road));\n      }\n\n      //-----CENTER---- strings//\n      if (indexRoad === 0) {\n        roads.center.string = pointsToString([\n          {\n            letter: \"M\",\n            coords: [vectors.roadBottomLeft(road)],\n          },\n        ]);\n      }\n      roads.center.string += pointsToString([\n        {\n          letter: \"L\",\n          coords: [vectors.roadBottomLeft(road), vectors.roadBottomRight(road)],\n        },\n      ]);\n\n      roads.coordInfo = <circle cx={coordInfo.x} cy={coordInfo.y} r=\"5\" />;\n\n      //-----CURB----- strings//\n      if (indexRoad === 0) {\n        roads.curb.string = pointsToString([\n          {\n            letter: \"M\",\n            coords: [vectors.roadBottomLeft(road)],\n          },\n        ]);\n      }\n      roads.curb.string += pointsToString([\n        {\n          letter: \"L\",\n          coords: [vectors.roadBottomLeft(road), vectors.roadTopLeft(road)],\n        },\n        {\n          letter: \"M\",\n          coords: [vectors.roadTopRight(road)],\n        },\n        {\n          letter: \"L\",\n          coords: [vectors.roadBottomRight(road)],\n        },\n      ]);\n      if (indexRoad === points.length - 1) {\n        roads.curb.string += pointsToString([\n          {\n            letter: \"L\",\n            coords: [vectors.roadBottomLeft(points[0])],\n          },\n        ]);\n      }\n\n      //----ASPHALT---- elements//\n      roads.asphalt.elements[side] = roads.asphalt.strings[\n        side\n      ].map((lane, index) => (\n        <path d={lane} key={index} className={side + \"-asphalt\"} />\n      ));\n\n      //-----DEBUG----- elements//\n      roads.debug.elements[side] = roads.debug.strings[\n        side\n      ].map((coords, index) => (\n        <line\n          x1={coords[0].x}\n          y1={coords[0].y}\n          x2={coords[1].x}\n          y2={coords[1].y}\n          key={index}\n          className={side + \"-debug\"}\n        />\n      ));\n\n      //-----LINE------ elements//\n      roads.line.elements.striped = roads.line.strings.striped.map(\n        (coords, index) => (\n          <line\n            x1={coords[0].x}\n            y1={coords[0].y}\n            x2={coords[1].x}\n            y2={coords[1].y}\n            key={index}\n            className={side + \"-line\"}\n            strokeDasharray=\"30, 60\"\n          />\n        )\n      );\n      roads.line.elements.continous = roads.line.strings.continous.map(\n        (coords, index) => (\n          <line\n            x1={coords[0].x}\n            y1={coords[0].y}\n            x2={coords[1].x}\n            y2={coords[1].y}\n            key={index}\n            className={side + \"-line\"}\n          />\n        )\n      );\n\n      if (side === \"backward\") {\n        //-LANE CONTROL- strings//\n        controls.lanes.strings.forward.remove.push(\n          sumVector(\n            vectors.roadBottomLeft(road),\n            lenDeg(coordInfo.roadLength / 3, road.angle)\n          )\n        );\n\n        controls.lanes.strings.forward.add.push(\n          sumVector(\n            vectors.roadBottomLeft(road),\n            lenDeg((coordInfo.roadLength * 2) / 3, road.angle)\n          )\n        );\n\n        controls.lanes.strings.backward.remove.push(\n          sumVector(\n            vectors.roadBottomRight(road),\n            lenDeg(coordInfo.roadLength / 3, road.angle)\n          )\n        );\n\n        controls.lanes.strings.backward.add.push(\n          sumVector(\n            vectors.roadBottomRight(road),\n            lenDeg((coordInfo.roadLength * 2) / 3, road.angle)\n          )\n        );\n\n        //-LANE CONTROL- elements//\n        controls.lanes.elements.forward.remove = controls.lanes.strings.forward.remove.map(\n          (coords, index) => (\n            <circle\n              cx={coords.x}\n              cy={coords.y}\n              r=\"10\"\n              className=\"add-lane\"\n              key={index}\n              onClick={() => addLanes(index, \"Forward\", -1)}\n            />\n          )\n        );\n\n        controls.lanes.elements.forward.add = controls.lanes.strings.forward.add.map(\n          (coords, index) => (\n            <circle\n              cx={coords.x}\n              cy={coords.y}\n              r=\"10\"\n              className=\"add-lane\"\n              key={index}\n              onClick={() => addLanes(index, \"Forward\", 1)}\n            />\n          )\n        );\n\n        controls.lanes.elements.backward.remove = controls.lanes.strings.backward.remove.map(\n          (coords, index) => (\n            <circle\n              cx={coords.x}\n              cy={coords.y}\n              r=\"10\"\n              className=\"add-lane\"\n              key={index}\n              onClick={() => addLanes(index, \"Backward\", -1)}\n            />\n          )\n        );\n\n        controls.lanes.elements.backward.add = controls.lanes.strings.backward.add.map(\n          (coords, index) => (\n            <circle\n              cx={coords.x}\n              cy={coords.y}\n              r=\"10\"\n              className=\"add-lane\"\n              key={index}\n              onClick={() => addLanes(index, \"Backward\", 1)}\n            />\n          )\n        );\n      }\n    }\n  }\n\n  //-----CENTER---- elements//\n  roads.center.element = <path d={roads.center.string} className=\"center\" />;\n\n  //-----CURB----- elements//\n  roads.curb.element = <path d={roads.curb.string} className=\"curb\" />;\n\n  //----ROTATE---- elements//\n  controls.rotate.elements = controls.rotate.strings.map((coords, index) => (\n    <circle\n      cx={coords.x}\n      cy={coords.y}\n      r=\"10\"\n      className=\"rotate\"\n      key={index}\n      {...rotate(index)}\n    />\n  ));\n\n  return [roads, controls];\n}\n\n//problemi z keyi\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { useDrag } from \"react-use-gesture\";\nimport { buildRoad } from \"./buildRoad\";\n\nexport default function Artboard(props) {\n  /* svg ref */\n  const artboardRef = useRef();\n\n  const [coordInfo, setCoordInfo] = useState({});\n\n  const [roadInfo, setRoadInfo] = useState([\n    {\n      numberOfBackward: 1,\n      numberOfForward: 2,\n      angle: 0,\n      index: 0,\n    },\n    {\n      numberOfBackward: 1,\n      numberOfForward: 1,\n      angle: 110,\n      index: 1,\n    },\n    {\n      numberOfBackward: 2,\n      numberOfForward: 3,\n      angle: 170,\n      index: 2,\n    },\n    {\n      numberOfBackward: 1,\n      numberOfForward: 1,\n      angle: 300,\n      index: 3,\n    },\n  ]);\n\n  const rotate = useDrag(({ event, args: [index] }) => {\n    if (event.x && event.y) {\n      const newPoint = sumVector(event, multVector(coordInfo, -1));\n      const newAngle = Math.atan2(newPoint.y, newPoint.x);\n      let deg = newAngle * (180 / Math.PI);\n      deg %= 360;\n      if (deg < 0) {\n        deg += 360;\n      }\n\n      // shallow copy\n      const newRoadInfo = roadInfo.map((a) => ({ ...a }));\n      newRoadInfo[index].angle = deg;\n      /* const originalIndex = newRoadInfo[index].index\n\n      newRoadInfo.sort((a, b) => a.angle - b.angle);\n      newRoadInfo.map((a) => console.log(a.angle))\n  \n      console.log(newRoadInfo) */\n\n      setRoadInfo(newRoadInfo);\n    }\n  });\n\n  function addLanes(index, side, add) {\n    const newRoadInfo = roadInfo.map((a) => ({ ...a }));\n\n    const numberOfLanes = newRoadInfo[index][\"numberOf\" + side];\n    \n    if (numberOfLanes > 1 || add > 0) {\n      newRoadInfo[index][\"numberOf\" + side] += add;\n    }\n\n    setRoadInfo(newRoadInfo);\n  }\n\n  useEffect(() => {\n    function changeCoordInfo() {\n      /* get coordinates of the svg element */\n      const newCoord = getCoordinateInfo(artboardRef, roadInfo);\n      /* sets state */\n      setCoordInfo(newCoord);\n    }\n\n    changeCoordInfo();\n    /* call getCoordinateInfo on every window change */\n    window.addEventListener(\"resize\", changeCoordInfo);\n\n    return () => {\n      window.removeEventListener(\"resize\", changeCoordInfo);\n    };\n  }, [artboardRef, roadInfo]);\n\n  /* get a list of all the road points */\n  const points = calculatePoints(roadInfo, coordInfo);\n\n  /* create elements based on road points */\n  const temp = buildRoad(points, coordInfo, rotate, addLanes);\n  const [roads, controls] = temp ? temp : [null, null];\n\n  return (\n    // touch-action ensures that chrome deosnt stop the drag after a few frames,\n    // but it doesn't work on svg elements\n    // https://stackoverflow.com/questions/45678190/dynamically-disabling-touch-action-overscroll-for-svg-elements\n    <div style={{ touchAction: \"none\" }}>\n      <svg className=\"artboard\" ref={artboardRef}>\n        {roads ? roads.asphalt.elements.forward : null}\n        {roads ? roads.asphalt.elements.backward : null}\n        {roads ? roads.center.element : null}\n        {roads ? roads.curb.element : null}\n        {roads ? roads.line.elements.continous : null}\n        {roads ? roads.line.elements.striped : null}\n        {roads ? roads.coordInfo : null}\n\n        {controls ? controls.rotate.elements : null}\n        {controls ? controls.lanes.elements.forward.remove : null}\n        {controls ? controls.lanes.elements.forward.add : null}\n        {controls ? controls.lanes.elements.backward.remove : null}\n        {controls ? controls.lanes.elements.backward.add : null}\n\n        {!roads ? <text>Loading</text> : null}\n      </svg>\n    </div>\n  );\n}\n\nfunction calculatePoints(roadInfo, coordInfo) {\n  const points = [];\n\n  if (!(coordInfo && coordInfo.roadLength && coordInfo.roadWidth)) {\n    return null;\n  }\n\n  for (let i = 0; i < roadInfo.length; i++) {\n    const road = roadInfo[i];\n\n    /* maxDistance = pixels from the center to the edge */\n    const maxDistance =\n      ((road.numberOfForward + road.numberOfBackward - 1) *\n        coordInfo.roadWidth) /\n      2;\n    points[i] = {\n      forward: [],\n      backward: [],\n      maxDistance,\n      angle: road.angle,\n      numberOfForward: road.numberOfForward,\n      numberOfBackward: road.numberOfBackward,\n    };\n\n    const allLanes = road.numberOfForward + road.numberOfBackward;\n\n    for (let j = 0; j < allLanes; j++) {\n      let firstPoint = sumVector(\n        /* sum vector pointing east to get left or right */\n        lenDeg(maxDistance - j * coordInfo.roadWidth, road.angle - 90),\n        /* and the vector, responsible for making the center area */\n        lenDeg(coordInfo.maxRoadWidth * coordInfo.roadWidth * 0.8, road.angle)\n      );\n\n      let lastPoint = sumVector(\n        firstPoint,\n        lenDeg(coordInfo.roadLength, road.angle)\n      );\n\n      if (j >= road.numberOfForward) {\n        points[i].forward.push({ first: firstPoint, last: lastPoint });\n      } else {\n        points[i].backward.push({ first: firstPoint, last: lastPoint });\n      }\n    }\n  }\n  return points;\n}\n\nexport function lenDeg(d, angle) {\n  const deg = (angle * Math.PI) / 180;\n  const x = d * Math.cos(deg);\n  const y = d * Math.sin(deg);\n  return { x, y };\n}\n\nexport function sumVector(a, b) {\n  const x = a.x + b.x;\n  const y = a.y + b.y;\n  return { x, y };\n}\n\nexport function multVector(a, k) {\n  const x = a.x * k;\n  const y = a.y * k;\n  return { x, y };\n}\n\nexport function getCoordinateInfo(element, roadInfo) {\n  if (!element.current) {\n    return null;\n  }\n\n  const clientRect = element.current.getBoundingClientRect();\n  const x = (clientRect.right - clientRect.left) / 2;\n  const y = (clientRect.bottom - clientRect.top) / 2;\n\n  const maxRoadWidth = Math.max.apply(\n    Math,\n    roadInfo.map((road) => {\n      return road.numberOfForward + road.numberOfBackward;\n    })\n  );\n  const windowBox = Math.min(x, y);\n  const roadLength = windowBox / 2;\n  const roadWidth = (windowBox / maxRoadWidth) * 0.4;\n\n  return { x, y, roadLength, roadWidth, maxRoadWidth };\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Artboard from \"./Artboard.js\";\n\n/* import { Typography } from \"@material-ui/core\";\nimport { useSpring, config, animated } from \"react-spring\";\nimport { useGesture } from \"react-use-gesture\"; */\n\nexport default function App() {\n  return (\n    <>\n      {<Artboard />}\n      {/* <Solution />\n      <Inventory /> */}\n    </>\n  );\n}\n/* function Solution() {\n  return (\n    <Typography variant=\"body1\">\n      Solution\n      <br />\n    </Typography>\n  );\n}\n\nfunction Inventory() {\n  return (\n    <>\n      <Item />\n      <Item />\n    </>\n  );\n}\n\nfunction Item() {\n  const [{ x, y }, setSpring] = useSpring(() => ({\n    x: 0,\n    y: 0,\n    config: config.stiff,\n  }));\n\n  const [isClicking, setIsClicking] = useState(false);\n\n  const bind = useGesture({\n    onDrag: ({ down, movement: [mx, my] }) => {\n      setSpring({ x: down ? mx : 0, y: down ? my : 0 });\n      setIsClicking(!mx && !my);\n    },\n    onDragEnd: ({ event }) => {\n      if (isClicking) {\n        console.log(\"Click\");\n      } else {\n        console.log(\"Move\", event.x, event.y);\n      }\n    },\n  });\n\n  return <animated.div className=\"drag\" {...bind()} style={{ x, y }} />;\n}\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}